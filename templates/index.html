<!-- templates/index.html -->
{% extends "base.html" %}

{% block title %}Dashboard - Doctor's Client Management System{% endblock %}

{% block page_title %}Dashboard{% endblock %}

{% block content %}
<div class="dashboard-container">
    <div class="dashboard-widgets">
        <div class="widget">
            <div class="widget-icon">
                <i class='bx bx-user'></i>
            </div>
            <div class="widget-content">
                <h3>Clients</h3>
                <p class="widget-value" id="client-count">{{ client_count }}</p>
                <a href="/clients" class="widget-link">View All</a>
            </div>
        </div>
        
        <div class="widget">
            <div class="widget-icon">
                <i class='bx bx-clipboard'></i>
            </div>
            <div class="widget-content">
                <h3>Programs</h3>
                <p class="widget-value" id="program-count">{{ program_count }}</p>
                <a href="/programs" class="widget-link">View All</a>
            </div>
        </div>
        
        <div class="widget">
            <div class="widget-icon">
                <i class='bx bx-group'></i>
            </div>
            <div class="widget-content">
                <h3>Enrollments</h3>
                <p class="widget-value" id="enrollment-count">{{ enrollment_count }}</p>
                <a href="/clients" class="widget-link">Manage</a>
            </div>
        </div>
        
        <div class="widget">
            <div class="widget-icon">
                <i class='bx bx-plus-medical'></i>
            </div>
            <div class="widget-content">
                <h3>Quick Access</h3>
                <div class="quick-actions">
                    <a href="/clients/new" class="quick-action">
                        <i class='bx bx-user-plus'></i>
                        <span>New Client</span>
                    </a>
                    <a href="/programs/new" class="quick-action">
                        <i class='bx bx-plus-circle'></i>
                        <span>New Program</span>
                    </a>
                    <a href="/search/clients" class="quick-action">
                        <i class='bx bx-search-alt'></i>
                        <span>Search</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <div class="dashboard-sections">
        <div class="dashboard-section">
            <div class="section-header">
                <h2>Recent Clients</h2>
                <a href="/clients" class="view-all">View All</a>
            </div>
            <div class="section-content" id="recent-clients">
                {% if recent_clients %}
                <div class="client-list">
                    {% for client in recent_clients %}
                    <div class="client-item">
                        <div class="client-info">
                            <i class='bx bx-user-circle'></i>
                            <div>
                                <h4>{{ client.first_name }} {{ client.last_name }}</h4>
                                <p>{{ client.gender }}, {{ client.date_of_birth }}</p>
                            </div>
                        </div>
                        <a href="/clients/{{ client.id }}" class="action-btn view-btn"><i class='bx bx-show'></i></a>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <p>No clients found</p>
                {% endif %}
            </div>
        </div>
        
        <div class="dashboard-section">
            <div class="section-header">
                <h2>Active Programs</h2>
                <a href="/programs" class="view-all">View All</a>
            </div>
            <div class="section-content" id="active-programs">
                {% if active_programs %}
                <div class="program-list">
                    {% for program in active_programs %}
                    <div class="program-item">
                        <div class="program-info">
                            <h4>{{ program.name }}</h4>
                            <span class="status-badge active">{{ program.status }}</span>
                        </div>
                        <a href="/programs/{{ program.id }}" class="action-btn view-btn"><i class='bx bx-show'></i></a>
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <p>No active programs found</p>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="/static/js/dashboard.js"></script>
{% endblock %}